<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MilkMan Realtime App</title>
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-database-compat.js"></script>
    <style>
        :root { --primary: #1a237e; --accent: #007bff; --success: #2e7d32; }
        body { font-family: sans-serif; background: #f0f2f5; padding: 15px; display: flex; justify-content: center; }
        .container { background: white; padding: 20px; border-radius: 15px; width: 100%; max-width: 400px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        input { width: 100%; padding: 10px; margin: 10px 0; border: 1px solid #ddd; border-radius: 8px; box-sizing: border-box; }
        .btn { width: 100%; padding: 12px; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; color: white; margin-top: 10px; }
        .btn-admin { background: var(--primary); }
        .btn-grahak { background: var(--accent); }
        .bill-card { background: #e8f5e9; border-left: 5px solid var(--success); padding: 15px; border-radius: 10px; margin-top: 15px; }
        .hidden { display: none; }
    </style>
</head>
<body>

<div class="container">
    <div id="login-section">
        <h2 style="text-align: center;">ü•õ MilkMan Login</h2>
        <input type="text" id="userName" placeholder="Apna Naam (eg: Rahul)">
        <input type="password" id="userPass" placeholder="Password / 1234">
        <button class="btn btn-grahak" onclick="login()">Kholein</button>
    </div>

    <div id="admin-panel" class="hidden">
        <h3>üë®‚Äçüåæ Admin Entry</h3>
        <input type="text" id="targetCust" placeholder="Grahak ka Naam">
        <input type="number" id="ltr" placeholder="Liters">
        <button class="btn btn-admin" onclick="sendToFirebase()">Entry Save Karein</button>
        <button class="btn" style="background:#888" onclick="location.reload()">Logout</button>
    </div>

    <div id="grahak-portal" class="hidden">
        <h3>üìä Aapka Daily Bill</h3>
        <div id="display">Upar niche check karein...</div>
        <button class="btn" style="background:#888" onclick="location.reload()">Logout</button>
    </div>
</div>

<script>
    // 1. APNA CONFIG YAHAN PASTE KAREIN
    const firebaseConfig = {
        // YAHAN APNA WOH CODE PASTE KAREIN JO FIREBASE SE MILA THA
    };

    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    const database = firebase.database();

    function login() {
        let n = document.getElementById('userName').value.trim();
        let p = document.getElementById('userPass').value;
        if (p === "milk123") { document.getElementById('login-section').classList.add('hidden'); document.getElementById('admin-panel').classList.remove('hidden'); }
        else if (p === "1234" && n !== "") { fetchBill(n); }
    }

    function sendToFirebase() {
        let name = document.getElementById('targetCust').value.trim().toLowerCase();
        let liter = document.getElementById('ltr').value;
        if(!name || !liter) return alert("Pura bhariye!");

        firebase.database().ref('users/' + name).set({
            ltr: liter,
            date: new Date().toLocaleDateString(),
            total: (liter * 65).toFixed(2)
        });
        alert("‚úÖ Data Internet par Save ho gaya!");
    }

    function fetchBill(name) {
        firebase.database().ref('users/' + name.toLowerCase()).on('value', (snap) => {
            let data = snap.val();
            document.getElementById('login-section').classList.add('hidden');
            document.getElementById('grahak-portal').classList.remove('hidden');
            let box = document.getElementById('display');

if(data) {
                box.innerHTML = <div class="bill-card"><h3>Hi ${name}!</h3><p>Dudh: ${data.ltr}L</p><p>Total: ‚Çπ${data.total}</p><small>${data.date}</small></div>;
            } else {
                box.innerHTML = "Koi data nahi mila.";
            }
        });
    }

{
  "rules": {
    ".read": true,
    ".write": true
  }
}
    
    
</script>
</body>
</html>
    
